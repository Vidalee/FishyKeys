// Code generated by goa v3.21.1, DO NOT EDIT.
//
// key_management HTTP server types
//
// Command:
// $ goa gen github.com/Vidalee/FishyKeys/design

package server

import (
	keymanagement "github.com/Vidalee/FishyKeys/gen/key_management"
	goa "goa.design/goa/v3/pkg"
)

// CreateMasterKeyRequestBody is the type of the "key_management" service
// "create_master_key" endpoint HTTP request body.
type CreateMasterKeyRequestBody struct {
	// Total number of shares to create
	TotalShares *int `form:"total_shares,omitempty" json:"total_shares,omitempty" xml:"total_shares,omitempty"`
	// Minimum number of shares required to reconstruct the key
	MinShares *int `form:"min_shares,omitempty" json:"min_shares,omitempty" xml:"min_shares,omitempty"`
	// Admin username for key management
	AdminUsername *string `form:"admin_username,omitempty" json:"admin_username,omitempty" xml:"admin_username,omitempty"`
	// Admin password for key management
	AdminPassword *string `form:"admin_password,omitempty" json:"admin_password,omitempty" xml:"admin_password,omitempty"`
}

// AddShareRequestBody is the type of the "key_management" service "add_share"
// endpoint HTTP request body.
type AddShareRequestBody struct {
	// One of the shares need to unlock the master key
	Share *string `form:"share,omitempty" json:"share,omitempty" xml:"share,omitempty"`
}

// DeleteShareRequestBody is the type of the "key_management" service
// "delete_share" endpoint HTTP request body.
type DeleteShareRequestBody struct {
	// The index of the share to delete
	Index *int `form:"index,omitempty" json:"index,omitempty" xml:"index,omitempty"`
}

// CreateMasterKeyResponseBody is the type of the "key_management" service
// "create_master_key" endpoint HTTP response body.
type CreateMasterKeyResponseBody struct {
	// The generated key shares
	Shares []string `form:"shares,omitempty" json:"shares,omitempty" xml:"shares,omitempty"`
	// The admin user's username
	AdminUsername *string `form:"admin_username,omitempty" json:"admin_username,omitempty" xml:"admin_username,omitempty"`
}

// GetKeyStatusResponseBody is the type of the "key_management" service
// "get_key_status" endpoint HTTP response body.
type GetKeyStatusResponseBody struct {
	// Whether the key is currently locked
	IsLocked bool `form:"is_locked" json:"is_locked" xml:"is_locked"`
	// Number of shares currently held
	CurrentShares int `form:"current_shares" json:"current_shares" xml:"current_shares"`
	// Minimum number of shares required
	MinShares int `form:"min_shares" json:"min_shares" xml:"min_shares"`
	// Total number of shares
	TotalShares int `form:"total_shares" json:"total_shares" xml:"total_shares"`
}

// AddShareResponseBody is the type of the "key_management" service "add_share"
// endpoint HTTP response body.
type AddShareResponseBody struct {
	// The index of the share added
	Index int `form:"index" json:"index" xml:"index"`
	// Whether the master key has been unlocked
	Unlocked bool `form:"unlocked" json:"unlocked" xml:"unlocked"`
}

// CreateMasterKeyInvalidParametersResponseBody is the type of the
// "key_management" service "create_master_key" endpoint HTTP response body for
// the "invalid_parameters" error.
type CreateMasterKeyInvalidParametersResponseBody struct {
	// Name is the name of this class of errors.
	Name string `form:"name" json:"name" xml:"name"`
	// ID is a unique identifier for this particular occurrence of the problem.
	ID string `form:"id" json:"id" xml:"id"`
	// Message is a human-readable explanation specific to this occurrence of the
	// problem.
	Message string `form:"message" json:"message" xml:"message"`
	// Is the error temporary?
	Temporary bool `form:"temporary" json:"temporary" xml:"temporary"`
	// Is the error a timeout?
	Timeout bool `form:"timeout" json:"timeout" xml:"timeout"`
	// Is the error a server-side fault?
	Fault bool `form:"fault" json:"fault" xml:"fault"`
}

// NewCreateMasterKeyResponseBody builds the HTTP response body from the result
// of the "create_master_key" endpoint of the "key_management" service.
func NewCreateMasterKeyResponseBody(res *keymanagement.CreateMasterKeyResult) *CreateMasterKeyResponseBody {
	body := &CreateMasterKeyResponseBody{
		AdminUsername: res.AdminUsername,
	}
	if res.Shares != nil {
		body.Shares = make([]string, len(res.Shares))
		for i, val := range res.Shares {
			body.Shares[i] = val
		}
	}
	return body
}

// NewGetKeyStatusResponseBody builds the HTTP response body from the result of
// the "get_key_status" endpoint of the "key_management" service.
func NewGetKeyStatusResponseBody(res *keymanagement.GetKeyStatusResult) *GetKeyStatusResponseBody {
	body := &GetKeyStatusResponseBody{
		IsLocked:      res.IsLocked,
		CurrentShares: res.CurrentShares,
		MinShares:     res.MinShares,
		TotalShares:   res.TotalShares,
	}
	return body
}

// NewAddShareResponseBody builds the HTTP response body from the result of the
// "add_share" endpoint of the "key_management" service.
func NewAddShareResponseBody(res *keymanagement.AddShareResult) *AddShareResponseBody {
	body := &AddShareResponseBody{
		Index:    res.Index,
		Unlocked: res.Unlocked,
	}
	return body
}

// NewCreateMasterKeyInvalidParametersResponseBody builds the HTTP response
// body from the result of the "create_master_key" endpoint of the
// "key_management" service.
func NewCreateMasterKeyInvalidParametersResponseBody(res *goa.ServiceError) *CreateMasterKeyInvalidParametersResponseBody {
	body := &CreateMasterKeyInvalidParametersResponseBody{
		Name:      res.Name,
		ID:        res.ID,
		Message:   res.Message,
		Temporary: res.Temporary,
		Timeout:   res.Timeout,
		Fault:     res.Fault,
	}
	return body
}

// NewCreateMasterKeyPayload builds a key_management service create_master_key
// endpoint payload.
func NewCreateMasterKeyPayload(body *CreateMasterKeyRequestBody) *keymanagement.CreateMasterKeyPayload {
	v := &keymanagement.CreateMasterKeyPayload{
		TotalShares:   *body.TotalShares,
		MinShares:     *body.MinShares,
		AdminUsername: *body.AdminUsername,
		AdminPassword: *body.AdminPassword,
	}

	return v
}

// NewAddSharePayload builds a key_management service add_share endpoint
// payload.
func NewAddSharePayload(body *AddShareRequestBody) *keymanagement.AddSharePayload {
	v := &keymanagement.AddSharePayload{
		Share: *body.Share,
	}

	return v
}

// NewDeleteSharePayload builds a key_management service delete_share endpoint
// payload.
func NewDeleteSharePayload(body *DeleteShareRequestBody) *keymanagement.DeleteSharePayload {
	v := &keymanagement.DeleteSharePayload{
		Index: *body.Index,
	}

	return v
}

// ValidateCreateMasterKeyRequestBody runs the validations defined on
// create_master_key_request_body
func ValidateCreateMasterKeyRequestBody(body *CreateMasterKeyRequestBody) (err error) {
	if body.TotalShares == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("total_shares", "body"))
	}
	if body.MinShares == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("min_shares", "body"))
	}
	if body.AdminUsername == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("admin_username", "body"))
	}
	if body.AdminPassword == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("admin_password", "body"))
	}
	return
}

// ValidateAddShareRequestBody runs the validations defined on
// add_share_request_body
func ValidateAddShareRequestBody(body *AddShareRequestBody) (err error) {
	if body.Share == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("share", "body"))
	}
	return
}

// ValidateDeleteShareRequestBody runs the validations defined on
// delete_share_request_body
func ValidateDeleteShareRequestBody(body *DeleteShareRequestBody) (err error) {
	if body.Index == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("index", "body"))
	}
	return
}
