{"openapi":"3.0.3","info":{"title":"FishyKeys API","description":"The FishyKeys API for key management","version":"1.0"},"servers":[{"url":"http://localhost:8080"}],"paths":{"/key_management/create_master_key":{"post":{"tags":["key_management"],"summary":"create_master_key key_management","description":"Create a new master key and split it into shares","operationId":"key_management#create_master_key","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMasterKeyRequestBody"},"example":{"admin_password":"admin_password123!","admin_username":"admin","min_shares":3,"total_shares":5}}}},"responses":{"201":{"description":"Created response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMasterKeyResponseBody"},"example":{"admin_username":"admin","shares":["Repudiandae blanditiis id cupiditate unde eos.","Sit ratione.","Et ut magnam labore molestiae."]}}}},"400":{"description":"invalid_parameters: Invalid parameters provided","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"key_already_exists: Conflict response.","content":{"application/json":{"schema":{"type":"string","example":"Dolorem omnis sed et qui et quis."},"example":"Magni veniam occaecati."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Eligendi aut quae vel occaecati."},"example":"Excepturi dolorum sed consequatur eos doloribus sit."}}}}}},"/key_management/share":{"delete":{"tags":["key_management"],"summary":"delete_share key_management","description":"Delete a share from the key management system","operationId":"key_management#delete_share","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteShareRequestBody"},"example":{"index":1}}}},"responses":{"200":{"description":"OK response."},"400":{"description":"wrong_index: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Corrupti aut."},"example":"Aut quis."}}},"404":{"description":"no_key_set: Not Found response.","content":{"application/json":{"schema":{"type":"string","example":"Natus dignissimos."},"example":"Commodi rerum quo excepturi."}}},"409":{"description":"key_already_unlocked: Conflict response.","content":{"application/json":{"schema":{"type":"string","example":"Quos officiis."},"example":"Maiores at et ut occaecati harum maiores."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Voluptatem qui et."},"example":"Ducimus eum qui est."}}}}},"post":{"tags":["key_management"],"summary":"add_share key_management","description":"Add a share to unlock the master key","operationId":"key_management#add_share","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddShareRequestBody"},"example":{"share":"EXAMPLEA5ZKwDn8Zotr3B+d+F+UzrcJ1Yhl2rU0"}}}},"responses":{"201":{"description":"Created response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddShareResponseBody"},"example":{"index":5890167680709064409,"unlocked":true}}}},"400":{"description":"wrong_shares: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Corporis officia natus eius maxime doloribus explicabo."},"example":"Asperiores architecto similique quia illo eos quasi."}}},"404":{"description":"no_key_set: Not Found response.","content":{"application/json":{"schema":{"type":"string","example":"Consequatur illum totam officiis."},"example":"Dolorem fuga cupiditate alias quis voluptatibus dignissimos."}}},"409":{"description":"key_already_unlocked: Conflict response.","content":{"application/json":{"schema":{"type":"string","example":"Omnis quia et repellat natus quidem impedit."},"example":"Doloremque possimus."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Non voluptatem qui."},"example":"Quidem voluptatibus ducimus."}}}}}},"/key_management/status":{"get":{"tags":["key_management"],"summary":"get_key_status key_management","description":"Get the current status of the master key","operationId":"key_management#get_key_status","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetKeyStatusResponseBody"},"example":{"current_shares":7711465592139798484,"is_locked":false,"min_shares":816161376085798070,"total_shares":5265395392647482762}}}},"404":{"description":"no_key_set: Not Found response.","content":{"application/json":{"schema":{"type":"string","example":"Dolore est temporibus nam laboriosam natus rerum."},"example":"Rerum autem rerum omnis reiciendis."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Est laborum ut vel non nam magnam."},"example":"Quo eveniet deleniti praesentium ex eum."}}}}}},"/users":{"get":{"tags":["users"],"summary":"list users users","description":"List all users","operationId":"users#list users","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"},"example":[{"created_at":"Saepe nesciunt aut.","updated_at":"Id fuga in numquam voluptatem.","username":"Eos ducimus repudiandae et distinctio."},{"created_at":"Saepe nesciunt aut.","updated_at":"Id fuga in numquam voluptatem.","username":"Eos ducimus repudiandae et distinctio."}]},"example":[{"created_at":"Saepe nesciunt aut.","updated_at":"Id fuga in numquam voluptatem.","username":"Eos ducimus repudiandae et distinctio."},{"created_at":"Saepe nesciunt aut.","updated_at":"Id fuga in numquam voluptatem.","username":"Eos ducimus repudiandae et distinctio."}]}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Est et corrupti culpa minus velit."},"example":"Quas ut."}}}}},"post":{"tags":["users"],"summary":"create user users","description":"Create a new user","operationId":"users#create user","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserRequestBody"},"example":{"password":"s3cr3t","username":"alice"}}}},"responses":{"201":{"description":"Created response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserResponseBody"},"example":{"username":"Dignissimos libero ea nobis praesentium non."}}}},"400":{"description":"invalid_parameters: Invalid input","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"username_taken: Conflict response.","content":{"application/json":{"schema":{"type":"string","example":"Ut officia earum totam esse."},"example":"Est et expedita doloremque architecto commodi rerum."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Velit praesentium sint."},"example":"Nam nobis libero repudiandae."}}}}}},"/users/auth":{"post":{"tags":["users"],"summary":"auth user users","description":"Authenticate a user with username and password","operationId":"users#auth user","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserRequestBody"},"example":{"password":"s3cr3t","username":"alice"}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthUserResponseBody"},"example":{"token":"Occaecati nesciunt eos commodi.","username":"Sequi accusantium fugit sed."}}}},"401":{"description":"unauthorized: Unauthorized response.","content":{"application/json":{"schema":{"type":"string","example":"Ab qui harum distinctio."},"example":"Quam modi."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Cumque amet et."},"example":"Ipsum sapiente et quia."}}}}}},"/users/{username}":{"delete":{"tags":["users"],"summary":"delete user users","description":"Delete a user by username","operationId":"users#delete user","parameters":[{"name":"username","in":"path","description":"Username of the user to delete","required":true,"schema":{"type":"string","description":"Username of the user to delete","example":"alice"},"example":"alice"}],"responses":{"200":{"description":"OK response."},"404":{"description":"user_not_found: Not Found response.","content":{"application/json":{"schema":{"type":"string","example":"Est sit dignissimos."},"example":"Ex hic placeat maxime."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Sint voluptas aspernatur."},"example":"Eligendi quae adipisci occaecati."}}}}}}},"components":{"schemas":{"AddShareRequestBody":{"type":"object","properties":{"share":{"type":"string","description":"One of the shares need to unlock the master key","example":"EXAMPLEA5ZKwDn8Zotr3B+d+F+UzrcJ1Yhl2rU0"}},"example":{"share":"EXAMPLEA5ZKwDn8Zotr3B+d+F+UzrcJ1Yhl2rU0"},"required":["share"]},"AddShareResponseBody":{"type":"object","properties":{"index":{"type":"integer","description":"The index of the share added","example":931669034124869970,"format":"int64"},"unlocked":{"type":"boolean","description":"Whether the master key has been unlocked","example":true}},"example":{"index":3872896210058284524,"unlocked":true},"required":["index","unlocked"]},"AuthUserResponseBody":{"type":"object","properties":{"token":{"type":"string","description":"JWT or session token","example":"Dolorem sed incidunt id dolore sed."},"username":{"type":"string","description":"The username of the authenticated user","example":"Cupiditate sint molestiae adipisci architecto."}},"example":{"token":"Sit sit in rem.","username":"Itaque magnam atque est."}},"CreateMasterKeyRequestBody":{"type":"object","properties":{"admin_password":{"type":"string","description":"Admin password for key management","example":"admin_password123!"},"admin_username":{"type":"string","description":"Admin username for key management","example":"admin"},"min_shares":{"type":"integer","description":"Minimum number of shares required to reconstruct the key","example":3,"format":"int64"},"total_shares":{"type":"integer","description":"Total number of shares to create","example":5,"format":"int64"}},"example":{"admin_password":"admin_password123!","admin_username":"admin","min_shares":3,"total_shares":5},"required":["total_shares","min_shares","admin_username","admin_password"]},"CreateMasterKeyResponseBody":{"type":"object","properties":{"admin_username":{"type":"string","description":"The admin user's username","example":"admin"},"shares":{"type":"array","items":{"type":"string","example":"Iste et animi explicabo sed."},"description":"The generated key shares","example":["Commodi repudiandae et molestias quasi.","Cupiditate eos et nisi eos beatae.","Eligendi consequatur voluptas."]}},"example":{"admin_username":"admin","shares":["Eos ut.","Sunt ut qui sint sapiente."]}},"CreateUserRequestBody":{"type":"object","properties":{"password":{"type":"string","description":"Password (hashed or plain depending on implementation)","example":"s3cr3t"},"username":{"type":"string","description":"Username of the new user","example":"alice"}},"example":{"password":"s3cr3t","username":"alice"},"required":["username","password"]},"CreateUserResponseBody":{"type":"object","properties":{"username":{"type":"string","description":"The username of the created user","example":"Nam voluptatem maiores qui velit."}},"example":{"username":"Excepturi deserunt omnis aliquam."}},"DeleteShareRequestBody":{"type":"object","properties":{"index":{"type":"integer","description":"The index of the share to delete","example":1,"format":"int64"}},"example":{"index":1},"required":["index"]},"Error":{"type":"object","properties":{"fault":{"type":"boolean","description":"Is the error a server-side fault?","example":false},"id":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"message":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"name":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"temporary":{"type":"boolean","description":"Is the error temporary?","example":false},"timeout":{"type":"boolean","description":"Is the error a timeout?","example":false}},"description":"Invalid parameters provided","example":{"fault":false,"id":"123abc","message":"parameter 'p' must be an integer","name":"bad_request","temporary":false,"timeout":true},"required":["name","id","message","temporary","timeout","fault"]},"GetKeyStatusResponseBody":{"type":"object","properties":{"current_shares":{"type":"integer","description":"Number of shares currently held","example":5901166280847989925,"format":"int64"},"is_locked":{"type":"boolean","description":"Whether the key is currently locked","example":true},"min_shares":{"type":"integer","description":"Minimum number of shares required","example":2148045937798897608,"format":"int64"},"total_shares":{"type":"integer","description":"Total number of shares","example":2087716876176659606,"format":"int64"}},"example":{"current_shares":6424931001824332862,"is_locked":false,"min_shares":7957248520782200033,"total_shares":945154162230229594},"required":["is_locked","current_shares","min_shares","total_shares"]},"User":{"type":"object","properties":{"created_at":{"type":"string","description":"User creation timestamp","example":"Autem ut necessitatibus dolor earum aut."},"updated_at":{"type":"string","description":"User last update timestamp","example":"Esse dolores aut quia ea."},"username":{"type":"string","description":"The username","example":"Laborum illo impedit debitis quia."}},"example":{"created_at":"Aperiam nemo et rerum quidem expedita.","updated_at":"Qui quia et similique.","username":"Eum necessitatibus perspiciatis."},"required":["username","created_at","updated_at"]}}},"tags":[{"name":"key_management","description":"The FishyKeys server handles master key operations"},{"name":"users","description":"User service manages user accounts and authentication"}]}