{"openapi":"3.0.3","info":{"title":"FishyKeys API","description":"The FishyKeys API for key management","version":"1.0"},"servers":[{"url":"http://localhost:8080"}],"paths":{"/key_management/create_master_key":{"post":{"tags":["key_management"],"summary":"create_master_key key_management","description":"Create a new master key and split it into shares","operationId":"key_management#create_master_key","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMasterKeyRequestBody"},"example":{"admin_password":"admin_password123!","admin_username":"admin","min_shares":3,"total_shares":5}}}},"responses":{"201":{"description":"Created response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMasterKeyResponseBody"},"example":{"admin_username":"admin","shares":["Repudiandae blanditiis id cupiditate unde eos.","Sit ratione.","Et ut magnam labore molestiae."]}}}},"400":{"description":"invalid_parameters: Invalid parameters provided","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"key_already_exists: Conflict response.","content":{"application/json":{"schema":{"type":"string","example":"Et quis eaque eius et dignissimos vel."},"example":"Cumque amet et."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Occaecati voluptate dolorem omnis sed et."},"example":"Ab qui harum distinctio."}}}}}},"/key_management/share":{"delete":{"tags":["key_management"],"summary":"delete_share key_management","description":"Delete a share from the key management system","operationId":"key_management#delete_share","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteShareRequestBody"},"example":{"index":1}}}},"responses":{"200":{"description":"OK response."},"400":{"description":"wrong_index: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Corrupti aut."},"example":"Ducimus eum qui est."}}},"404":{"description":"no_key_set: Not Found response.","content":{"application/json":{"schema":{"type":"string","example":"Natus dignissimos."},"example":"Dolorem fuga cupiditate alias quis voluptatibus dignissimos."}}},"409":{"description":"key_already_unlocked: Conflict response.","content":{"application/json":{"schema":{"type":"string","example":"Quos officiis."},"example":"Commodi rerum quo excepturi."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Voluptatem qui et."},"example":"Doloremque possimus."}}}}},"post":{"tags":["key_management"],"summary":"add_share key_management","description":"Add a share to unlock the master key","operationId":"key_management#add_share","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddShareRequestBody"},"example":{"share":"EXAMPLEA5ZKwDn8Zotr3B+d+F+UzrcJ1Yhl2rU0"}}}},"responses":{"201":{"description":"Created response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddShareResponseBody"},"example":{"index":5890167680709064409,"unlocked":true}}}},"400":{"description":"wrong_shares: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Natus eius maxime doloribus."},"example":"Perspiciatis repellendus facilis est."}}},"404":{"description":"no_key_set: Not Found response.","content":{"application/json":{"schema":{"type":"string","example":"Consequatur illum totam officiis."},"example":"Rerum ab et aliquam."}}},"409":{"description":"key_already_unlocked: Conflict response.","content":{"application/json":{"schema":{"type":"string","example":"Omnis quia et repellat natus quidem impedit."},"example":"Asperiores architecto similique quia illo eos quasi."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Molestiae non voluptatem qui."},"example":"Quo eveniet deleniti praesentium ex eum."}}}}}},"/key_management/status":{"get":{"tags":["key_management"],"summary":"get_key_status key_management","description":"Get the current status of the master key","operationId":"key_management#get_key_status","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetKeyStatusResponseBody"},"example":{"current_shares":7711465592139798484,"is_locked":false,"min_shares":816161376085798070,"total_shares":5265395392647482762}}}},"404":{"description":"no_key_set: Not Found response.","content":{"application/json":{"schema":{"type":"string","example":"Natus rerum optio est laborum."},"example":"Excepturi dolorum sed consequatur eos doloribus sit."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Vel non nam magnam beatae ipsa."},"example":"Magni veniam occaecati."}}}}}},"/users":{"get":{"tags":["users"],"summary":"list users users","description":"List all users","operationId":"users#list users","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"},"example":[{"created_at":"Necessitatibus dicta optio.","updated_at":"Eos ducimus repudiandae et distinctio.","username":"Culpa voluptatem impedit tempore et quod."},{"created_at":"Necessitatibus dicta optio.","updated_at":"Eos ducimus repudiandae et distinctio.","username":"Culpa voluptatem impedit tempore et quod."},{"created_at":"Necessitatibus dicta optio.","updated_at":"Eos ducimus repudiandae et distinctio.","username":"Culpa voluptatem impedit tempore et quod."},{"created_at":"Necessitatibus dicta optio.","updated_at":"Eos ducimus repudiandae et distinctio.","username":"Culpa voluptatem impedit tempore et quod."}]},"example":[{"created_at":"Necessitatibus dicta optio.","updated_at":"Eos ducimus repudiandae et distinctio.","username":"Culpa voluptatem impedit tempore et quod."},{"created_at":"Necessitatibus dicta optio.","updated_at":"Eos ducimus repudiandae et distinctio.","username":"Culpa voluptatem impedit tempore et quod."},{"created_at":"Necessitatibus dicta optio.","updated_at":"Eos ducimus repudiandae et distinctio.","username":"Culpa voluptatem impedit tempore et quod."}]}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Praesentium sint porro."},"example":"Quis in est et expedita doloremque architecto."}}}}},"post":{"tags":["users"],"summary":"create user users","description":"Create a new user","operationId":"users#create user","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserRequestBody"},"example":{"password":"s3cr3t","username":"alice"}}}},"responses":{"201":{"description":"Created response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserResponseBody"},"example":{"username":"Dignissimos libero ea nobis praesentium non."}}}},"400":{"description":"invalid_parameters: Invalid input","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"username_taken: Username already exists","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Ut officia earum totam esse."},"example":"Maiores at et ut occaecati harum maiores."}}}}}},"/users/auth":{"post":{"tags":["users"],"summary":"auth user users","description":"Authenticate a user with username and password","operationId":"users#auth user","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserRequestBody"},"example":{"password":"s3cr3t","username":"alice"}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthUserResponseBody"},"example":{"token":"Eos sapiente.","username":"Dolores aperiam excepturi quisquam."}}}},"400":{"description":"invalid_parameters: Invalid input","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"unauthorized: Invalid username or password","content":{"application/vnd.goa.error":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Sit sit in rem."},"example":"Maxime odit eligendi quae adipisci."}}}}}},"/users/{username}":{"delete":{"tags":["users"],"summary":"delete user users","description":"Delete a user by username","operationId":"users#delete user","parameters":[{"name":"username","in":"path","description":"Username of the user to delete","required":true,"schema":{"type":"string","description":"Username of the user to delete","example":"alice"},"example":"alice"}],"responses":{"200":{"description":"OK response."},"404":{"description":"user_not_found: Not Found response.","content":{"application/json":{"schema":{"type":"string","example":"Est et corrupti culpa minus velit."},"example":"Rerum quidem nam nobis libero."}}},"500":{"description":"internal_error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Est sit dignissimos."},"example":"Aperiam atque quas ut quidem ex hic."}}}}}}},"components":{"schemas":{"AddShareRequestBody":{"type":"object","properties":{"share":{"type":"string","description":"One of the shares need to unlock the master key","example":"EXAMPLEA5ZKwDn8Zotr3B+d+F+UzrcJ1Yhl2rU0"}},"example":{"share":"EXAMPLEA5ZKwDn8Zotr3B+d+F+UzrcJ1Yhl2rU0"},"required":["share"]},"AddShareResponseBody":{"type":"object","properties":{"index":{"type":"integer","description":"The index of the share added","example":3872896210058284524,"format":"int64"},"unlocked":{"type":"boolean","description":"Whether the master key has been unlocked","example":true}},"example":{"index":8040308551754500641,"unlocked":true},"required":["index","unlocked"]},"AuthUserResponseBody":{"type":"object","properties":{"token":{"type":"string","description":"JWT or session token","example":"Cupiditate sint molestiae adipisci architecto."},"username":{"type":"string","description":"The username of the authenticated user","example":"Sint voluptas aspernatur."}},"example":{"token":"Itaque magnam atque est.","username":"Dolorem sed incidunt id dolore sed."}},"CreateMasterKeyRequestBody":{"type":"object","properties":{"admin_password":{"type":"string","description":"Admin password for key management","example":"admin_password123!"},"admin_username":{"type":"string","description":"Admin username for key management","example":"admin"},"min_shares":{"type":"integer","description":"Minimum number of shares required to reconstruct the key","example":3,"format":"int64"},"total_shares":{"type":"integer","description":"Total number of shares to create","example":5,"format":"int64"}},"example":{"admin_password":"admin_password123!","admin_username":"admin","min_shares":3,"total_shares":5},"required":["total_shares","min_shares","admin_username","admin_password"]},"CreateMasterKeyResponseBody":{"type":"object","properties":{"admin_username":{"type":"string","description":"The admin user's username","example":"admin"},"shares":{"type":"array","items":{"type":"string","example":"Quia et similique nihil iste et."},"description":"The generated key shares","example":["Sed sed accusantium commodi.","Et molestias quasi eveniet."]}},"example":{"admin_username":"admin","shares":["Et nisi eos beatae et eligendi.","Voluptas nesciunt ipsam eos ut repellendus.","Ut qui sint.","Architecto vero voluptatem ad."]}},"CreateUserRequestBody":{"type":"object","properties":{"password":{"type":"string","description":"Password (hashed or plain depending on implementation)","example":"s3cr3t"},"username":{"type":"string","description":"Username of the new user","example":"alice"}},"example":{"password":"s3cr3t","username":"alice"},"required":["username","password"]},"CreateUserResponseBody":{"type":"object","properties":{"username":{"type":"string","description":"The username of the created user","example":"Nam voluptatem maiores qui velit."}},"example":{"username":"Excepturi deserunt omnis aliquam."}},"DeleteShareRequestBody":{"type":"object","properties":{"index":{"type":"integer","description":"The index of the share to delete","example":1,"format":"int64"}},"example":{"index":1},"required":["index"]},"Error":{"type":"object","properties":{"fault":{"type":"boolean","description":"Is the error a server-side fault?","example":false},"id":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"message":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"name":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"temporary":{"type":"boolean","description":"Is the error temporary?","example":true},"timeout":{"type":"boolean","description":"Is the error a timeout?","example":false}},"description":"Invalid parameters provided","example":{"fault":true,"id":"123abc","message":"parameter 'p' must be an integer","name":"bad_request","temporary":true,"timeout":false},"required":["name","id","message","temporary","timeout","fault"]},"GetKeyStatusResponseBody":{"type":"object","properties":{"current_shares":{"type":"integer","description":"Number of shares currently held","example":7957248520782200033,"format":"int64"},"is_locked":{"type":"boolean","description":"Whether the key is currently locked","example":true},"min_shares":{"type":"integer","description":"Minimum number of shares required","example":945154162230229594,"format":"int64"},"total_shares":{"type":"integer","description":"Total number of shares","example":7182608618089995540,"format":"int64"}},"example":{"current_shares":3635276347056796467,"is_locked":true,"min_shares":7285269608645810010,"total_shares":8868013395234815538},"required":["is_locked","current_shares","min_shares","total_shares"]},"User":{"type":"object","properties":{"created_at":{"type":"string","description":"User creation timestamp","example":"Consequatur autem ut necessitatibus dolor."},"updated_at":{"type":"string","description":"User last update timestamp","example":"Aut ratione."},"username":{"type":"string","description":"The username","example":"Natus aliquam laborum illo impedit debitis."}},"example":{"created_at":"Sunt eum necessitatibus perspiciatis consequatur aperiam nemo.","updated_at":"Rerum quidem expedita optio.","username":"Dolores aut quia."},"required":["username","created_at","updated_at"]}}},"tags":[{"name":"key_management","description":"The FishyKeys server handles master key operations"},{"name":"users","description":"User service manages user accounts and authentication"}]}